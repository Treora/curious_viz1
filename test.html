<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <script src="lib/d3.v4.js"></script>
    <script src="build/main.js"></script>
    <style>
    .plotContainer {
        display: inline-block;
        width: 300px;
        height: 200px;
        /*position: absolute;*/
        /*overflow: hidden;*/
        /*border: 1px black solid;*/
    }

    #plot_2d_denoise {
        /*width: 500px;*/
        /*height: 300px;*/
    }
    </style>
</head>
<body>
<!--
    <div id="plot_2d">
        <form id="plot_2d_selectStdDev">
            <input name="stdDev" type="radio" value="0.1" onchange="draw2d()">0.1
            <br>
            <input name="stdDev" type="radio" value="0.2" onchange="draw2d()" checked>0.2
            <br>
            <input name="stdDev" type="radio" value="0.5" onchange="draw2d()">0.5
            <br>
        </form>
        <div id="plot_2d_data" class="plotContainer"></div>
        <div id="plot_2d_noise" class="plotContainer"></div>
        <div id="plot_2d_noisy" class="plotContainer"></div>
        <div id="plot_2d_denoise" class="plotContainer"></div>
        <div id="plot_2d_denoised" class="plotContainer"></div>
    </div>
    <script>
        var draw2d = function () {
            drawPlot2d({
                dataStdDev: +document.forms['plot_2d_selectStdDev']['stdDev'].value || 0.2,
                noiseStdDev: 1.0,
            });
        };
        draw2d();
    </script>
-->

    <div id="plot_1d">
        <form id="plot_1d_selectStdDev">
            <input name="stdDev" type="range"
                value="0.3" min="0.1" max="0.5" step="0.1"
                oninput="if (hasValueChanged(this)) plot1d.updateData(read1dSettings());"
                onchange="plot1d.updateAfterData(read1dSettings());"
                onkeyup="this.onchange();"
            />
        </form>
        <form id="plot_1d_selectNoise">
            <input name="noise" type="range"
                value="0.2" min="0.1" max="0.5" step="0.1"
                oninput="if (hasValueChanged(this)) plot1d.updateNoise(read1dSettings())"
                onchange="plot1d.updateAfterNoise(read1dSettings())"
                onkeyup="this.onchange();"
            />
        </form>
        <div id="plot_1d_data" class="plotContainer"></div>
        <div id="plot_1d_noise" class="plotContainer"></div>
        <div id="plot_1d_noisy" class="plotContainer"></div>
        <div id="plot_1d_denoise" class="plotContainer"></div>
        <div id="plot_1d_denoised" class="plotContainer"></div>
    </div>
    <script>

        function hasValueChanged(input) {
            var changed = input.getAttribute('data-lastValue') !== input.value;
            input.setAttribute('data-lastValue', input.value);
            return changed;
        }

        function read1dSettings() {
            var settings = {
                dataMean: 0,
                noiseMean: 0,
                dataStdDev: +document.forms['plot_1d_selectStdDev']['stdDev'].value,
                noiseStdDev: +document.forms['plot_1d_selectNoise']['noise'].value,
            };
            return settings
        }

        plot1d.updateAll(read1dSettings());

    </script>


</body>
</html>
