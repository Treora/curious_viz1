<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="style.css" type="text/css">
    <script src="lib/d3.v4.js"></script>
    <script src="build/main.js"></script>
</head>
<body>

    <div id="plot_2d">
        <input id="plot_2d_selectStdDev" name="stdDev"
            type="range" class="slider"
            value="0.3" min="0.1" max="0.5" step="0.1"
            oninput="if (hasValueChanged(this)) plot2d.updateData(read2dSettings());"
            onchange="plot2d.updateAfterData(read2dSettings());"
            onkeyup="this.onchange();"
        />
        <div id="plot_2d_data" class="plotContainer"></div>
        <div id="plot_2d_noise" class="plotContainer"></div>
        <div id="plot_2d_noisy" class="plotContainer"></div>
        <div id="plot_2d_denoise" class="plotContainer"></div>
        <div id="plot_2d_denoised" class="plotContainer"></div>
    </div>
    <script>
        function read2dSettings() {
            var settings = {
                dataMean: 0,
                noiseMean: 0,
                dataStdDev: +document.getElementById('plot_2d_selectStdDev').value,
                noiseStdDev: 1.0,
            };
            return settings
        }

        plot2d.updateAll(read2dSettings());
    </script>


    <div id="plot_1d">
        <input id="plot_1d_selectStdDev" name="stdDev"
            type="range" class="slider"
            value="0.3" min="0.1" max="0.5" step="0.1"
            oninput="if (hasValueChanged(this)) plot1d.updateData(read1dSettings());"
            onchange="plot1d.updateAfterData(read1dSettings());"
            onkeyup="this.onchange();"
        />
        <input id="plot_1d_selectNoise" name="noise"
            type="range" class="slider"
            value="0.2" min="0.1" max="0.5" step="0.1"
            oninput="if (hasValueChanged(this)) plot1d.updateNoise(read1dSettings());"
            onchange="plot1d.updateAfterNoise(read1dSettings());"
            onkeyup="this.onchange();"
        />
        <div id="plot_1d_data" class="plotContainer"></div>
        <div id="plot_1d_noise" class="plotContainer"></div>
        <div id="plot_1d_noisy" class="plotContainer"></div>
        <div id="plot_1d_denoise" class="plotContainer"></div>
        <div id="plot_1d_denoised" class="plotContainer"></div>
    </div>
    <script>

        function hasValueChanged(input) {
            var changed = input.getAttribute('data-lastValue') !== input.value;
            input.setAttribute('data-lastValue', input.value);
            return changed;
        }

        function read1dSettings() {
            var settings = {
                dataMean: 0,
                noiseMean: 0,
                dataStdDev: +document.getElementById('plot_1d_selectStdDev').value,
                noiseStdDev: +document.getElementById('plot_1d_selectNoise').value,
            };
            return settings
        }

        plot1d.updateAll(read1dSettings());

    </script>


</body>
</html>
