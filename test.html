<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <script src="lib/d3.v4.js"></script>
    <script>
    function load_plot_2d() {
        var width = 700;
        var height = 500;
        var svg = d3.select('#plot_2d')
            .append('svg')
                .attr('width', width)
                .attr('height', height);

        var data = [
            {id: 0, x: 2.5, y: 3},
            {id: 1, x: 1, y: 0.5},
            {id: 2, x: 3, y: 1.5},
            {id: 3, x: 2, y: 3.5},
            {id: 4, x: 1.5, y: 2},
        ];
        var xrangemin = 0;
        var xrangemax = 5;
        var yrangemin = 0;
        var yrangemax = 5;
        function update(data) {
            var points = svg.selectAll('.point')
                .data(data, function key(d) {return d.id;});

            points.enter().append('circle')
                .attr('class', 'point')
                .attr('r', 15)
                .attr('cx', function (d) {return (d.x - xrangemin)/xrangemax * width;})
                .attr('cy', function (d) {return (d.y - yrangemin)/yrangemax * height;})
              .merge(points)
              .transition()
                .duration(1000)
                .attr('cx', function (d) {return (d.x - xrangemin)/xrangemax * width;})
                .attr('cy', function (d) {return (d.y - yrangemin)/yrangemax * height;});

            points.exit()
              .transition()
                .duration(500)
                .style('fill-opacity', 0)
                .remove();
        }
        update(data);

        window.setTimeout(function () {
            var data2 = [
                {id: 3, x: 4, y: 4.5},
                {id: 0, x: 2.5, y: 2},
                {id: 4, x: 3.5, y: 1.5},
                {id: 1, x: 0.5, y: 1.0},
            ];
            update(data2);
        }, 1000);
    }
    </script>
</head>
<body>

    <h1>Bla</h1>
    <p>
        Bla bla bla
    </p>

    <div id="plot_2d"></div>

    <script>
    load_plot_2d();
    </script>

</body>
</html>
